% language: origami

import es2015 exposing Map;

class MutableMap() {
  field store = new Map();

  member self.has(key) = store.has(key);
  
  member self[key] {
    assert self.has(key);
    store.get(key);
  }

  member self[key] <- value {
    store.set(key, value);
  }

  member self.getOrElse(key, defaultValue) {
    if self.has(key) {
      self[key];
    } else {
      defaultValue();
    }
  }
}